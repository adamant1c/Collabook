{% extends 'base.html' %}
{% load i18n %}

{% block title %}
{% trans "Select World" %}
- Collabook RPG
{% endblock %}

{% block content %}
<style>
    .quest-card {
        background: rgba(26, 22, 18, 0.6);
        border: 1px solid var(--gold-dim);
        border-radius: 12px;
        padding: 1.5rem;
        margin-bottom: 2rem;
        /* Aggiunto spazio fra i mondi */
        transition: transform 0.3s ease;
    }

    .quest-card:hover {
        transform: translateY(-5px);
        background: rgba(26, 22, 18, 0.8);
    }
</style>
<div class="container">
    <h1 style='text-align: center; color: #d4af37; font-family: "Cinzel", serif;'>
        üåç
        {% trans "Choose your world from the available options" %}
    </h1>

    {% if is_admin %}
    <div class="alert alert-info">
        {% trans "Admin Mode: You can create new worlds." %}
    </div>
    {% endif %}

    {% if default_worlds %}
    {% for story in default_worlds %}
    <div class="quest-card">
        <h3>
            üìö
            {{ story.title }}
            <small style="font-size: 0.6em; color: var(--text-muted);">
                ‚Ä¢
                {{ story.genre }}
            </small>
        </h3>
        <p>
            <strong>
                {% trans "World" %}:
            </strong>
            {{ story.world_description }}
        </p>


        <form method="post" style="margin-top: 1rem;">
            {% csrf_token %}
            <input type="hidden" name="story_id" value="{{ story.id }}">

            {% if story.existing_char %}
            <button type="submit" name="action" value="continue" class="btn-gold shadow">
                {% trans "Continue Adventure" %}
            </button>
            {% else %}
            <button type="submit" name="action" value="join" class="btn-gold shadow">
                {% trans "Enter World" %}
            </button>
            {% endif %}
        </form>
    </div>
    {% endfor %}
    {% endif %}

    {% if custom_worlds %}
    <h2 style="margin-top: 2rem;">
        {% trans "Custom Worlds" %}
    </h2>
    {% for story in custom_worlds %}
    <div class="quest-card">
        <h3>
            üìö
            {{ story.title }}
            <small style="font-size: 0.6em; color: var(--text-muted);">
                ‚Ä¢
                {{ story.genre }}
            </small>
        </h3>
        <p>
            <strong>
                {% trans "World" %}:
            </strong>
            {{ story.world_description }}
        </p>

        <form method="post" style="margin-top: 1rem;">
            {% csrf_token %}
            <input type="hidden" name="story_id" value="{{ story.id }}">

            {% if story.existing_char %}
            <button type="submit" name="action" value="continue" class="btn-gold shadow">
                {% trans "Continue Adventure" %}
            </button>
            {% else %}
            <button type="submit" name="action" value="join" class="btn-gold shadow">
                {% trans "Enter World" %}
            </button>
            {% endif %}
        </form>
    </div>
    {% endfor %}
    {% endif %}

    {% if not default_worlds and not custom_worlds %}
    <div class="alert alert-warning">
        {% trans "No worlds available at the moment." %}
    </div>
    {% endif %}
</div>
{% endblock %}